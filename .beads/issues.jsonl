{"id":"moonjq-1vz","title":"Refactor: simplify array contains helpers","description":"Refactor array containment helpers for clarity and efficiency.","acceptance_criteria":"Containment helpers are iterative and avoid recursion; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:36:23.011643+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:36:23.011643+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-1vz.1","title":"Replace recursive array_contains helpers with Iter::any/all","description":"Use iterator helpers to avoid recursion and improve readability.","acceptance_criteria":"array_contains_view/all use Iter::any/all; moon check/test pass.","notes":"Replaced recursive array contains helpers with Iter::any/all for clarity and early-exit semantics.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:36:23.066109+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:36:58.687728+08:00","closed_at":"2026-01-19T23:36:58.68773+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-1vz.1","depends_on_id":"moonjq-1vz","type":"parent-child","created_at":"2026-01-19T23:36:23.066767+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-27q","title":"Refactor: optimize string repetition","description":"Replace recursive string repetition with StringBuilder to avoid O(n^2) concatenation and recursion depth.","status":"closed","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T08:09:10.464895+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:09:39.744293+08:00","closed_at":"2026-01-20T08:09:39.744293+08:00","close_reason":"Closed"}
{"id":"moonjq-27q.1","title":"Rewrite repeat_string with StringBuilder","description":"Use StringBuilder and a loop to build repeated strings; preserve count\u003c=0 behavior.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T08:09:15.286157+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:09:39.742708+08:00","closed_at":"2026-01-20T08:09:39.742708+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moonjq-27q.1","depends_on_id":"moonjq-27q","type":"parent-child","created_at":"2026-01-20T08:09:15.286859+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-2xd","title":"Refactor: make paths/leaf_paths lazy","description":"Reduce memory/allocations by replacing eager path collection with lazy Iter generation.","status":"closed","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T07:54:11.251262+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:05:55.760959+08:00","closed_at":"2026-01-20T08:05:55.760959+08:00","close_reason":"Closed"}
{"id":"moonjq-2xd.1","title":"Implement lazy path enumeration in interpreter","description":"Replace eager arrays in eval_paths/eval_leaf_paths/paths(filter) with Iter::new-driven traversal; keep order semantics.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T07:54:16.511889+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:05:55.759317+08:00","closed_at":"2026-01-20T08:05:55.759317+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moonjq-2xd.1","depends_on_id":"moonjq-2xd","type":"parent-child","created_at":"2026-01-20T07:54:16.512626+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-5ar","title":"Refactor: simplify keys/values evaluation","description":"Simplify object keys/values evaluation loops for readability and fewer iterator allocations.","acceptance_criteria":"eval_keys/values use direct loops; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:57:55.475267+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:57:55.475267+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-5ar.1","title":"Use direct loops in eval_keys/values","description":"Replace iterator map/to_array with explicit loops.","acceptance_criteria":"eval_keys/values updated; moon check/test pass.","notes":"eval_keys/values now build arrays via direct loops over Map entries.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:57:55.526293+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:58:26.722222+08:00","closed_at":"2026-01-19T23:58:26.722225+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-5ar.1","depends_on_id":"moonjq-5ar","type":"parent-child","created_at":"2026-01-19T23:57:55.526931+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-8mp","title":"Refactor: reduce path allocation in enumeration","description":"Reduce temporary array allocations in path enumeration for performance and clarity.","acceptance_criteria":"Path enumeration uses push/pop and copies only when emitting paths; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:39:13.566537+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:39:13.566537+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-8mp.1","title":"Use push/pop for path collection","description":"Replace per-step path copy with in-place push/pop in path enumeration helpers.","acceptance_criteria":"collect_paths*, eval_paths, eval_leaf_paths use push/pop; moon check/test pass.","notes":"Reworked path enumeration to mutate path with push/pop and copy only when emitting; avoids per-step array allocations.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:39:13.617631+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:40:10.701762+08:00","closed_at":"2026-01-19T23:40:10.701765+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-8mp.1","depends_on_id":"moonjq-8mp","type":"parent-child","created_at":"2026-01-19T23:39:13.618262+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl","title":"Refactor moonjq for maintainability + performance","description":"Track refactor work for maintainability and performance in moonjq.","acceptance_criteria":"High-level refactor plan broken into trackable tasks; progress visible via bd list/ready.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.384999+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.384999+08:00","labels":["maintainability","performance","refactor"]}
{"id":"moonjq-9cl.1","title":"Inventory public APIs and call sites","description":"Use moon doc and moon ide find-references to map exported APIs used by callers across packages.","acceptance_criteria":"List of exported symbols with usage notes and candidates to de-publicize or move to internal.","status":"open","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.437789+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.437789+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.1","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.438427+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.2","title":"Package boundary and internalization pass","description":"Review package responsibilities (root, ast, parser, internal helpers) and propose moves/splits to keep packages focused and dependencies acyclic.","acceptance_criteria":"Documented package responsibility map and actionable move/split list.","status":"open","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.490947+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.490947+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.2","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.491513+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.3","title":"Methodize core types","description":"Convert free helper functions into methods on core types (AST/Value/Token/etc.) where it improves discoverability and reduces parameter passing.","acceptance_criteria":"Candidate list and refactor plan; public API changes tracked.","status":"open","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.545189+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.545189+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.3","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.545852+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.4","title":"View types and pattern matching upgrade","description":"Replace array/string slicing copies with ArrayView/StringView and use pattern matching for clearer control flow.","acceptance_criteria":"Identified copy-heavy paths and planned replacements with tests.","notes":"Replaced Map to_array use with iter/values in core paths; avoided per-scan String allocations via StringView compare.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.599868+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:27:59.266961+08:00","closed_at":"2026-01-19T23:27:59.266963+08:00","labels":["performance","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.4","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.600532+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.5","title":"Loop style and invariants cleanup","description":"Replace index-based loops with range loops and add invariants for functional loops to clarify correctness.","acceptance_criteria":"Loop change list with invariants for algorithmic loops; no behavior change.","notes":"Replaced C-style array loops in path enumeration with range loops and cached lengths for readability.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.654048+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:29:28.013916+08:00","closed_at":"2026-01-19T23:29:28.013919+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.5","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.65465+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.6","title":"Performance baseline and hotspot fixes","description":"Add measurement harness or lightweight timing for core interpreter paths; identify and fix top hotspots.","acceptance_criteria":"Baseline numbers recorded; hotspot list; at least one measurable improvement.","notes":"Optimized string split/join conversions by replacing recursive array concatenation with single-pass loops in interpreter_string_core.","status":"in_progress","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.709374+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:33:31.308836+08:00","labels":["performance","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.6","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.709966+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.7","title":"Coverage-driven tests for refactor safety","description":"Run moon coverage analyze and add tests for uncovered branches in core paths.","acceptance_criteria":"Coverage gaps tracked; tests added; moon test green.","status":"open","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.764204+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.764204+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.7","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.764845+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9dj","title":"Refactor: simplify first_gen evaluation","description":"Use Array::get for first element in generator results for clarity.","acceptance_criteria":"eval_first_gen uses get(0); tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:01:14.577355+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:01:14.577355+08:00","labels":["readability","refactor"]}
{"id":"moonjq-9dj.1","title":"Use Array::get in eval_first_gen","description":"Replace ArrayView match with get(0) in eval_first_gen.","acceptance_criteria":"eval_first_gen uses get(0); moon check/test pass.","notes":"eval_first_gen now uses Array::get(0) for clarity.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:01:14.628348+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:01:48.503533+08:00","closed_at":"2026-01-20T00:01:48.503535+08:00","labels":["readability","refactor"],"dependencies":[{"issue_id":"moonjq-9dj.1","depends_on_id":"moonjq-9dj","type":"parent-child","created_at":"2026-01-20T00:01:14.628921+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-aer","title":"Refactor: streamline index access mapping","description":"Reduce repeated match/length work in index access and improve readability.","acceptance_criteria":"Index access maps over indices with a single input match and cached length; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:51:06.170596+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:51:06.170596+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-aer.1","title":"Cache array length in eval_index_access","description":"Restructure eval_index_access to match input once and reuse array length.","acceptance_criteria":"eval_index_access uses a single match and cached len; moon check/test pass.","notes":"Matched input once in eval_index_access and cached array length for index mapping.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:51:06.221369+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:51:52.039893+08:00","closed_at":"2026-01-19T23:51:52.039896+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-aer.1","depends_on_id":"moonjq-aer","type":"parent-child","created_at":"2026-01-19T23:51:06.221949+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-afm","title":"Refactor: simplify literal evaluation","description":"Improve readability in literal evaluation by using methods on Literal and reducing match duplication.","acceptance_criteria":"Literal evaluation refactored without behavior change; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:47:41.104559+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:47:41.104559+08:00","labels":["readability","refactor"]}
{"id":"moonjq-afm.1","title":"Convert eval_literal to Literal::eval","description":"Move literal evaluation to a method for clarity and discoverability.","acceptance_criteria":"Literal::eval used at call sites; moon check/test pass.","notes":"Moved literal evaluation to Literal::to_json for clearer API and reuse.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:47:41.156451+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:48:38.098061+08:00","closed_at":"2026-01-19T23:48:38.098064+08:00","labels":["readability","refactor"],"dependencies":[{"issue_id":"moonjq-afm.1","depends_on_id":"moonjq-afm","type":"parent-child","created_at":"2026-01-19T23:47:41.157035+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-api","title":"Refactor: iterative matrix operations","description":"Replace recursive combinations/transpose helpers with iterative loops to reduce allocations and stack usage.","status":"closed","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T08:12:21.23924+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:12:42.990682+08:00","closed_at":"2026-01-20T08:12:42.990682+08:00","close_reason":"Closed"}
{"id":"moonjq-api.1","title":"Rewrite combinations/transpose helpers iteratively","description":"Replace recursive collect_arrays/cartesian_product/max_row_len/build_columns with loop-based versions.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T08:12:25.981839+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:12:42.988661+08:00","closed_at":"2026-01-20T08:12:42.988661+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moonjq-api.1","depends_on_id":"moonjq-api","type":"parent-child","created_at":"2026-01-20T08:12:25.982524+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-b5v","title":"Refactor: speed up array contains","description":"Replace linear scans for array contains with built-in contains where possible.","acceptance_criteria":"array_contains_view uses ArrayView::contains; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:55:28.987333+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:55:28.987333+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-b5v.1","title":"Use ArrayView::contains in array_contains_view","description":"Simplify array_contains_view with built-in contains for clarity.","acceptance_criteria":"array_contains_view uses contains; moon check/test pass.","notes":"array_contains_view now uses ArrayView::contains for clarity.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:55:29.036377+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:55:59.728804+08:00","closed_at":"2026-01-19T23:55:59.728811+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-b5v.1","depends_on_id":"moonjq-b5v","type":"parent-child","created_at":"2026-01-19T23:55:29.037005+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-hxv","title":"Refactor: simplify iter empty cases","description":"Replace empty array iterators with Iter::empty for clarity.","acceptance_criteria":"Empty cases use Iter::empty; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:03:22.320398+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:03:22.320398+08:00","labels":["readability","refactor"]}
{"id":"moonjq-hxv.1","title":"Use Iter::empty in eval_first_gen","description":"Return Iter::empty when gen results empty without extra match arms.","acceptance_criteria":"eval_first_gen uses guard+Iter::empty; moon check/test pass.","notes":"Simplified eval_first_gen to check empty results then index directly.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:03:22.37376+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:04:46.08345+08:00","closed_at":"2026-01-20T00:04:46.083452+08:00","labels":["readability","refactor"],"dependencies":[{"issue_id":"moonjq-hxv.1","depends_on_id":"moonjq-hxv","type":"parent-child","created_at":"2026-01-20T00:03:22.37434+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-ipq","title":"Refactor: streamline map values evaluation","description":"Simplify MapValues evaluation loop and avoid intermediate allocations.","acceptance_criteria":"MapValues uses direct iteration; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:52:19.484567+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:52:19.484567+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-ipq.1","title":"Rewrite eval_map_values with for-loop","description":"Replace fold over to_array with direct map iteration and update.","acceptance_criteria":"eval_map_values uses for k,v in obj; moon check/test pass.","status":"in_progress","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:52:19.534391+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:52:32.180845+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-ipq.1","depends_on_id":"moonjq-ipq","type":"parent-child","created_at":"2026-01-19T23:52:19.53501+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-k3f","title":"Refactor: replace last_in_view recursion","description":"Use ArrayView/Array last() helpers instead of recursive traversal.","acceptance_criteria":"last_in_view removed; callers use last(); tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:53:59.513669+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:53:59.513669+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-k3f.1","title":"Use Array::last in eval_last/last_gen","description":"Replace recursive last_in_view with Array/ArrayView last().","acceptance_criteria":"eval_last and eval_last_gen use last(); moon check/test pass.","notes":"Replaced recursive last_in_view with Array::last in eval_last and eval_last_gen.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:53:59.5714+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:55:00.150032+08:00","closed_at":"2026-01-19T23:55:00.150034+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-k3f.1","depends_on_id":"moonjq-k3f","type":"parent-child","created_at":"2026-01-19T23:53:59.572041+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-mna","title":"Refactor: iterative index search helpers","description":"Replace recursive array index helpers with loop-based versions to avoid deep recursion and repeated concatenation.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T08:14:11.258875+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:14:11.258875+08:00"}
{"id":"moonjq-mna.1","title":"Rewrite indices_of_array/find_first_index/find_last_index with loops","description":"Use range/index loops and push to build results; preserve offset semantics.","status":"open","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T08:14:16.103786+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:14:16.103786+08:00","dependencies":[{"issue_id":"moonjq-mna.1","depends_on_id":"moonjq-mna","type":"parent-child","created_at":"2026-01-20T08:14:16.104541+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-mso","title":"Refactor: streamline eval_contains dispatch","description":"Reduce repeated match nesting in contains/inside operations for readability.","acceptance_criteria":"eval_contains/inside use a helper to dispatch on container types; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:58:56.288901+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:58:56.288901+08:00","labels":["readability","refactor"]}
{"id":"moonjq-mso.1","title":"Add contains helper for input/needle pairing","description":"Extract container matching logic into a helper and reuse for contains/inside.","acceptance_criteria":"Helper used by eval_contains and eval_inside; moon check/test pass.","notes":"Extracted json_contains helper to unify contains logic and simplify eval_contains/eval_inside.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:58:56.339563+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:59:30.427537+08:00","closed_at":"2026-01-19T23:59:30.42754+08:00","labels":["readability","refactor"],"dependencies":[{"issue_id":"moonjq-mso.1","depends_on_id":"moonjq-mso","type":"parent-child","created_at":"2026-01-19T23:58:56.340234+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-n5y","title":"Refactor: cache repeat length","description":"Cache repeated array length to avoid recomputing in generator loop.","acceptance_criteria":"eval_repeat caches values length; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:07:09.1504+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:07:09.1504+08:00","labels":["performance","refactor"]}
{"id":"moonjq-n5y.1","title":"Store values length in eval_repeat","description":"Capture length once and reuse inside Iter::new closure.","acceptance_criteria":"eval_repeat uses len variable; moon check/test pass.","notes":"Cached values length in eval_repeat to avoid repeated length calls inside iterator.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:07:09.200828+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:07:43.642316+08:00","closed_at":"2026-01-20T00:07:43.642319+08:00","labels":["performance","refactor"],"dependencies":[{"issue_id":"moonjq-n5y.1","depends_on_id":"moonjq-n5y","type":"parent-child","created_at":"2026-01-20T00:07:09.201415+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-npn","title":"Refactor: simplify empty range output","description":"Use Iter::empty for empty range to simplify intent and avoid array allocation.","acceptance_criteria":"eval_range returns Iter::empty for n\u003c=0; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:56:40.498589+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:56:40.498589+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-npn.1","title":"Use Iter::empty in eval_range","description":"Replace [].iter() with Iter::empty() for empty ranges.","acceptance_criteria":"eval_range uses Iter::empty; moon check/test pass.","notes":"eval_range now returns Iter::empty() for n\u003c=0 to avoid empty array allocation.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:56:40.549497+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:57:12.966379+08:00","closed_at":"2026-01-19T23:57:12.966382+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-npn.1","depends_on_id":"moonjq-npn","type":"parent-child","created_at":"2026-01-19T23:56:40.550061+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-re2","title":"Refactor: optimize array subtraction","description":"Replace recursive array subtraction with iterative build to avoid O(n^2) concatenation overhead.","status":"closed","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T08:07:48.276656+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:08:22.485516+08:00","closed_at":"2026-01-20T08:08:22.485516+08:00","close_reason":"Closed"}
{"id":"moonjq-re2.1","title":"Rewrite array_without/array_contains_compare iteratively","description":"Use loops + push to build subtraction result; avoid recursive pattern matches and array concatenation.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T08:07:53.776186+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T08:08:22.483837+08:00","closed_at":"2026-01-20T08:08:22.483837+08:00","close_reason":"Closed","dependencies":[{"issue_id":"moonjq-re2.1","depends_on_id":"moonjq-re2","type":"parent-child","created_at":"2026-01-20T08:07:53.77686+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-rl3","title":"Refactor: consolidate array index normalization","description":"Centralize array index normalization and bounds checks for readability and reuse.","acceptance_criteria":"Index normalization helper used in access/has/in; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:43:30.178187+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:43:30.178187+08:00","labels":["readability","refactor"]}
{"id":"moonjq-rl3.1","title":"Add normalize_index helper for array access","description":"Introduce helper and reuse in eval_index_access/eval_has/eval_in.","acceptance_criteria":"Helper used across files; moon check/test pass.","notes":"Centralized array index normalization and bounds checks; reuse in access/has/in and slice clamping.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:43:30.235118+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:44:46.010692+08:00","closed_at":"2026-01-19T23:44:46.010708+08:00","labels":["readability","refactor"],"dependencies":[{"issue_id":"moonjq-rl3.1","depends_on_id":"moonjq-rl3","type":"parent-child","created_at":"2026-01-19T23:43:30.235771+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-uq8","title":"Refactor: simplify first element access","description":"Use Array::get for first element to avoid view matching and simplify logic.","acceptance_criteria":"eval_first uses Array::get; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:00:12.623388+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:00:12.623388+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-uq8.1","title":"Use Array::get in eval_first","description":"Replace match on ArrayView with get(0).","acceptance_criteria":"eval_first uses arr.get(0); moon check/test pass.","notes":"eval_first now uses Array::get(0) for clarity and to avoid view matching.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:00:12.674841+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:00:39.66881+08:00","closed_at":"2026-01-20T00:00:39.668813+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-uq8.1","depends_on_id":"moonjq-uq8","type":"parent-child","created_at":"2026-01-20T00:00:12.675416+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-w9c","title":"Refactor: simplify non-array index results","description":"Return nulls for index access on non-array inputs without iterating indices.","acceptance_criteria":"Non-array index access uses repeat/take; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:05:50.312099+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:05:50.312099+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-w9c.1","title":"Use Iter::repeat for non-array index results","description":"Replace indices.iter().map(_ =\u003e null) with Iter::repeat(null).take(count).","acceptance_criteria":"eval_index_access uses repeat/take for non-array; moon check/test pass.","notes":"Non-array index access now returns repeated nulls via Iter::repeat/take.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:05:50.363271+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:06:31.785744+08:00","closed_at":"2026-01-20T00:06:31.785746+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-w9c.1","depends_on_id":"moonjq-w9c","type":"parent-child","created_at":"2026-01-20T00:05:50.363856+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-wx0","title":"Refactor: simplify eval_repeat early exit","description":"Make eval_repeat early-exit clearer and avoid explicit returns.","acceptance_criteria":"eval_repeat uses guard style and reads linearly; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:02:17.202194+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:02:17.202194+08:00","labels":["readability","refactor"]}
{"id":"moonjq-wx0.1","title":"Use guard for empty repeat","description":"Replace explicit return with guard for empty repeat case.","acceptance_criteria":"eval_repeat uses guard for empty case; moon check/test pass.","notes":"eval_repeat now uses guard for empty result case.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-20T00:02:17.252784+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-20T00:02:54.885667+08:00","closed_at":"2026-01-20T00:02:54.885669+08:00","labels":["readability","refactor"],"dependencies":[{"issue_id":"moonjq-wx0.1","depends_on_id":"moonjq-wx0","type":"parent-child","created_at":"2026-01-20T00:02:17.253353+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-xog","title":"Refactor: simplify interpreter pipe execution","description":"Reduce temporary allocations in pipe execution and improve readability.","acceptance_criteria":"Pipe evaluation avoids building a temporary iterator array; tests pass.","notes":"Closed after subtask moonjq-xog.1: flat_map refactor blocked by error typing.","status":"closed","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:40:38.097828+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:44:59.160714+08:00","closed_at":"2026-01-19T23:44:59.160717+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-xog.1","title":"Use Iter::flat_map in Pipe evaluation","description":"Replace collect+array of iters in Pipe with flat_map pipeline.","acceptance_criteria":"eval_with_env Pipe uses flat_map; moon check/test pass.","notes":"Flat_map refactor blocked: Iter::flat_map does not accept raising functions; leaving existing pipe evaluation.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:40:38.149332+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:44:53.545707+08:00","closed_at":"2026-01-19T23:44:53.54571+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-xog.1","depends_on_id":"moonjq-xog","type":"parent-child","created_at":"2026-01-19T23:40:38.149906+08:00","created_by":"Hongbo Zhang"}]}
