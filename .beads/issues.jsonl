{"id":"moonjq-1vz","title":"Refactor: simplify array contains helpers","description":"Refactor array containment helpers for clarity and efficiency.","acceptance_criteria":"Containment helpers are iterative and avoid recursion; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:36:23.011643+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:36:23.011643+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-1vz.1","title":"Replace recursive array_contains helpers with Iter::any/all","description":"Use iterator helpers to avoid recursion and improve readability.","acceptance_criteria":"array_contains_view/all use Iter::any/all; moon check/test pass.","notes":"Replaced recursive array contains helpers with Iter::any/all for clarity and early-exit semantics.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:36:23.066109+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:36:58.687728+08:00","closed_at":"2026-01-19T23:36:58.68773+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-1vz.1","depends_on_id":"moonjq-1vz","type":"parent-child","created_at":"2026-01-19T23:36:23.066767+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-8mp","title":"Refactor: reduce path allocation in enumeration","description":"Reduce temporary array allocations in path enumeration for performance and clarity.","acceptance_criteria":"Path enumeration uses push/pop and copies only when emitting paths; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:39:13.566537+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:39:13.566537+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-8mp.1","title":"Use push/pop for path collection","description":"Replace per-step path copy with in-place push/pop in path enumeration helpers.","acceptance_criteria":"collect_paths*, eval_paths, eval_leaf_paths use push/pop; moon check/test pass.","notes":"Reworked path enumeration to mutate path with push/pop and copy only when emitting; avoids per-step array allocations.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:39:13.617631+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:40:10.701762+08:00","closed_at":"2026-01-19T23:40:10.701765+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-8mp.1","depends_on_id":"moonjq-8mp","type":"parent-child","created_at":"2026-01-19T23:39:13.618262+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl","title":"Refactor moonjq for maintainability + performance","description":"Track refactor work for maintainability and performance in moonjq.","acceptance_criteria":"High-level refactor plan broken into trackable tasks; progress visible via bd list/ready.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.384999+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.384999+08:00","labels":["maintainability","performance","refactor"]}
{"id":"moonjq-9cl.1","title":"Inventory public APIs and call sites","description":"Use moon doc and moon ide find-references to map exported APIs used by callers across packages.","acceptance_criteria":"List of exported symbols with usage notes and candidates to de-publicize or move to internal.","status":"open","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.437789+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.437789+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.1","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.438427+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.2","title":"Package boundary and internalization pass","description":"Review package responsibilities (root, ast, parser, internal helpers) and propose moves/splits to keep packages focused and dependencies acyclic.","acceptance_criteria":"Documented package responsibility map and actionable move/split list.","status":"open","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.490947+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.490947+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.2","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.491513+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.3","title":"Methodize core types","description":"Convert free helper functions into methods on core types (AST/Value/Token/etc.) where it improves discoverability and reduces parameter passing.","acceptance_criteria":"Candidate list and refactor plan; public API changes tracked.","status":"open","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.545189+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.545189+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.3","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.545852+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.4","title":"View types and pattern matching upgrade","description":"Replace array/string slicing copies with ArrayView/StringView and use pattern matching for clearer control flow.","acceptance_criteria":"Identified copy-heavy paths and planned replacements with tests.","notes":"Replaced Map to_array use with iter/values in core paths; avoided per-scan String allocations via StringView compare.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.599868+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:27:59.266961+08:00","closed_at":"2026-01-19T23:27:59.266963+08:00","labels":["performance","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.4","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.600532+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.5","title":"Loop style and invariants cleanup","description":"Replace index-based loops with range loops and add invariants for functional loops to clarify correctness.","acceptance_criteria":"Loop change list with invariants for algorithmic loops; no behavior change.","notes":"Replaced C-style array loops in path enumeration with range loops and cached lengths for readability.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.654048+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:29:28.013916+08:00","closed_at":"2026-01-19T23:29:28.013919+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.5","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.65465+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.6","title":"Performance baseline and hotspot fixes","description":"Add measurement harness or lightweight timing for core interpreter paths; identify and fix top hotspots.","acceptance_criteria":"Baseline numbers recorded; hotspot list; at least one measurable improvement.","notes":"Optimized string split/join conversions by replacing recursive array concatenation with single-pass loops in interpreter_string_core.","status":"in_progress","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.709374+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:33:31.308836+08:00","labels":["performance","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.6","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.709966+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-9cl.7","title":"Coverage-driven tests for refactor safety","description":"Run moon coverage analyze and add tests for uncovered branches in core paths.","acceptance_criteria":"Coverage gaps tracked; tests added; moon test green.","status":"open","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:21:36.764204+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:21:36.764204+08:00","labels":["maintainability","refactor"],"dependencies":[{"issue_id":"moonjq-9cl.7","depends_on_id":"moonjq-9cl","type":"parent-child","created_at":"2026-01-19T23:21:36.764845+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-rl3","title":"Refactor: consolidate array index normalization","description":"Centralize array index normalization and bounds checks for readability and reuse.","acceptance_criteria":"Index normalization helper used in access/has/in; tests pass.","status":"open","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:43:30.178187+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:43:30.178187+08:00","labels":["readability","refactor"]}
{"id":"moonjq-rl3.1","title":"Add normalize_index helper for array access","description":"Introduce helper and reuse in eval_index_access/eval_has/eval_in.","acceptance_criteria":"Helper used across files; moon check/test pass.","notes":"Centralized array index normalization and bounds checks; reuse in access/has/in and slice clamping.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:43:30.235118+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:44:46.010692+08:00","closed_at":"2026-01-19T23:44:46.010708+08:00","labels":["readability","refactor"],"dependencies":[{"issue_id":"moonjq-rl3.1","depends_on_id":"moonjq-rl3","type":"parent-child","created_at":"2026-01-19T23:43:30.235771+08:00","created_by":"Hongbo Zhang"}]}
{"id":"moonjq-xog","title":"Refactor: simplify interpreter pipe execution","description":"Reduce temporary allocations in pipe execution and improve readability.","acceptance_criteria":"Pipe evaluation avoids building a temporary iterator array; tests pass.","notes":"Closed after subtask moonjq-xog.1: flat_map refactor blocked by error typing.","status":"closed","priority":2,"issue_type":"epic","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:40:38.097828+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:44:59.160714+08:00","closed_at":"2026-01-19T23:44:59.160717+08:00","labels":["performance","readability","refactor"]}
{"id":"moonjq-xog.1","title":"Use Iter::flat_map in Pipe evaluation","description":"Replace collect+array of iters in Pipe with flat_map pipeline.","acceptance_criteria":"eval_with_env Pipe uses flat_map; moon check/test pass.","notes":"Flat_map refactor blocked: Iter::flat_map does not accept raising functions; leaving existing pipe evaluation.","status":"closed","priority":2,"issue_type":"task","owner":"bobzhang1988@gmail.com","created_at":"2026-01-19T23:40:38.149332+08:00","created_by":"Hongbo Zhang","updated_at":"2026-01-19T23:44:53.545707+08:00","closed_at":"2026-01-19T23:44:53.54571+08:00","labels":["performance","readability","refactor"],"dependencies":[{"issue_id":"moonjq-xog.1","depends_on_id":"moonjq-xog","type":"parent-child","created_at":"2026-01-19T23:40:38.149906+08:00","created_by":"Hongbo Zhang"}]}
